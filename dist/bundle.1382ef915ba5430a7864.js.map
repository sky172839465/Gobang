{"version":3,"sources":["webpack:///bundle.1382ef915ba5430a7864.js","webpack:///./src/js/chess-defined.js","webpack:///./src/js/main.js","webpack:///./src/img/Octocat.png","webpack:///./src/img/favicon.png","webpack:///./src/img/gobang.png","webpack:///./src/js/chess-query.js","webpack:///./src/js/draw-by-canvas.js","webpack:///./src/js/draw-by-div.js","webpack:///./src/js/index.js"],"names":["webpackJsonp","e","t","s","Object","defineProperty","value","CHESS_SIZE","VICTORY_CONDITION","SLASH_DISTANCE","STRAIGHT_DISTANCE","o","__esModule","prototype","hasOwnProperty","call","default","checkmateChessList","gameoverElement","lastChess","attackSide","player","setCommonFunction","chessOverlayStyles","createChess","getChessboardGrid","start","chessDefined","__webpack_require__","chessQuery","byCanvas","byDiv","document","querySelector","gobang","canvas","createElement","getContext","exports","getGrid","overlayStyles","init","classList","add","whiteSide","key","chesses","blackSide","cleanChessBoard","chessboard","setAttribute","clientWidth","style","width","childNodes","length","parentNode","removeChild","createChessBoard","chessRow","chessColumn","chessBoardGrid","gridWidth","gridHeight","chessboardRows","chessboardColumns","i","j","Math","floor","clientHeight","appendChild","onclick","event","chess","getOverlay","type","overlay","forEach","chessOverlayStyle","getPlayer","target","className","indexOf","closest","removeOverlay","push","isCheckmate","setVictoryChesses","setVictoryMessage","attackPlayer","rangeChessList","groupChessList","group","sortChessList","expectDistance","checkmat","getRangeChesses","getGroupChesses","getSortChesses","getExpectDistance","getConnectChesses","overlayList","getElementsByClassName","chessList","checkmateChess","victoryOverlay","side","innerText","remove","module","p","getPosition","asixX","getAttribute","asixY","getDistance","a","b","distanceX","distanceY","pow","toFixed","isWithinScope","other","abs","isFromLeftTopToRightBottomChess","isFromLeftBottomToRightTopChess","targetPosition","item","filter","leftTopToRightBottom","leftBottomToRightTop","vertical","horizontal","sort","chessA","chessB","itemChess","prevPosition","nextPosition","connectChessList","context","height","save","lineWidth","strokeStyle","stepY","beginPath","moveTo","lineTo","stroke","stepX","restore","chessBox","arc","PI","fillStyle","fill","div","app","window"],"mappings":"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","file":"bundle.1382ef915ba5430a7864.js","sourcesContent":["webpackJsonp([0,1],[function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.CHESS_SIZE=60,t.VICTORY_CONDITION=5,t.SLASH_DISTANCE=1.414,t.STRAIGHT_DISTANCE=1},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.checkmateChessList=t.gameoverElement=t.lastChess=t.attackSide=t.player=t.setCommonFunction=t.chessOverlayStyles=t.createChess=t.getChessboardGrid=t.start=void 0;var a=o(s(0)),i=o(s(6)),r=o(s(7)),n=o(s(8));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}var c=void 0,l=void 0,d=[],h=document.querySelector(\".gameover\"),u={},f=function(){var e;!(!(e=document.createElement(\"canvas\")).getContext||!e.getContext(\"2d\"))?(t.getChessboardGrid=c=r.getGrid,t.createChess=l=r.createChess,t.chessOverlayStyles=d=r.overlayStyles):(t.getChessboardGrid=c=n.getGrid,t.createChess=l=n.createChess,t.chessOverlayStyles=d=n.overlayStyles)},v=function(){h.classList.add(\"gameover--hide\"),u.player={whiteSide:{key:\"white\",chesses:[]},blackSide:{key:\"black\",chesses:[]}},u.attackSide=\"whiteSide\",u.checkmateChessList=[]},C=function(){var e;for((e=document.querySelector(\".chessboard\")).setAttribute(\"style\",\"width:\"+e.clientWidth+\"px\"),e.style.width=e.clientWidth+\"px\";e.childNodes.length>0;)e.childNodes[0].parentNode.removeChild(e.childNodes[0])},g=function(){var e,t,s,i,r,n,o,l,d,h;for(n=document.querySelector(\".chessboard\"),o=Math.floor(n.clientHeight/a.CHESS_SIZE),i=(l=Math.floor(n.clientWidth/a.CHESS_SIZE))*a.CHESS_SIZE-(a.CHESS_SIZE-1),r=o*a.CHESS_SIZE-(a.CHESS_SIZE-1),n.setAttribute(\"style\",\"width:\"+n.clientWidth+\"px\"),n.style.width=n.clientWidth+\"px\",s=c(i,r),n.appendChild(s),d=0;d<o;d++){for((e=document.createElement(\"div\")).classList.add(\"chessboard__row\"),h=0;h<l;h++)(t=document.createElement(\"div\")).classList.add(\"chessboard__column\"),t.classList.add(\"pointer\"),t.setAttribute(\"data-asix-x\",h),t.setAttribute(\"data-asix-y\",d),t.onclick=function(e){S(e)},e.appendChild(t);n.appendChild(e)}},m=function(e){var t;return t=document.createElement(\"div\"),d.forEach(function(e){t.classList.add(e)}),t.classList.add(\"chessman__overlay--\"+e),t},x=function(){return u.player[u.attackSide]},S=function(e){var t,s,a,i;t=e.target,s=x(),a=m(\"last\"),-1===t.className.indexOf(\"chessboard__column\")&&(t=t.closest(\".chessboard__column\")),-1===t.className.indexOf(\"selected\")&&(i=l(s),_(),t.appendChild(i),t.appendChild(a),t.classList.add(\"selected\"),u.lastChess=t,s.chesses.push(t),u.lastChess&&p()&&(_(),b(u.checkmateChessList),T(u.attackSide)),u.attackSide=\"whiteSide\"===u.attackSide?\"blackSide\":\"whiteSide\")},p=function(){var e,t,s,r,n,o,c=!1;if(e=x(),(t=i.getRangeChesses(a.VICTORY_CONDITION,u.lastChess,e)).length>=a.VICTORY_CONDITION)for(r in s=i.getGroupChesses(u.lastChess,t))if(s[r].length>=a.VICTORY_CONDITION&&(n=i.getSortChesses(r,s[r]),o=y(r),u.checkmateChessList=i.getConnectChesses(a.VICTORY_CONDITION,o,n),u.checkmateChessList.length>=a.VICTORY_CONDITION))return c=!0;return c},_=function(){var e;for(e=document.getElementsByClassName(\"chessman__overlay\");e.length>0;)e[0].parentNode.removeChild(e[0])},y=function(e){var t;switch(e){case\"leftTopToRightBottom\":case\"leftBottomToRightTop\":t=a.SLASH_DISTANCE;break;case\"vertical\":case\"horizontal\":t=a.STRAIGHT_DISTANCE}return t},b=function(e){var t,s,a,i,r;for(i=0;i<e.length;i++){for((t=e[i]).classList.add(\"chessboard__column--victory\"),s=t.childNodes,r=0;r<s.length;r++)-1!==s[r].className.indexOf(\"chessman\")&&s[r].classList.add(\"chessman--victory\");a=m(\"victory\"),t.appendChild(a)}},T=function(e){document.querySelector(\".gameover__message\").innerText=\"Winner is \"+e+\" !\",h.classList.remove(\"gameover--hide\")};t.start=function(e){e.target.innerText=\"Restart\",f(),v(),C(),g()},t.getChessboardGrid=c,t.createChess=l,t.chessOverlayStyles=d,t.setCommonFunction=f,t.player=void 0,t.attackSide=void 0,t.lastChess=void 0,t.gameoverElement=h,t.checkmateChessList=void 0},function(e,t){},function(e,t,s){e.exports=s.p+\"img/Octocat.png\"},function(e,t,s){e.exports=s.p+\"img/favicon.png\"},function(e,t,s){e.exports=s.p+\"img/gobang.png\"},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var a=function(e){return{asixX:+e.getAttribute(\"data-asix-x\"),asixY:+e.getAttribute(\"data-asix-y\")}},i=function(e,t){var s,a;return s=e.asixX-t.asixX,a=e.asixY-t.asixY,+Math.pow(s*s+a*a,.5).toFixed(3)},r=function(e,t,s){return Math.abs(e.asixX-t.asixX)<s&&Math.abs(e.asixY-t.asixY)<s},n=function(e,t){return e.asixX<t.asixX&&e.asixY<t.asixY||e.asixX>t.asixX&&e.asixY>t.asixY},o=function(e,t){return e.asixX<t.asixX&&e.asixY>t.asixY||e.asixX>t.asixX&&e.asixY<t.asixY};t.getRangeChesses=function(e,t,s){var i,n;return i=a(t),s.chesses.filter(function(t){return n=a(t),!!r(n,i,e)})},t.getGroupChesses=function(e,t){var s,i,r,c,l,d={leftTopToRightBottom:[],leftBottomToRightTop:[],vertical:[],horizontal:[]};for(s=a(e),l=0;l<t.length;l++)if(r=t[l],c=a(r),Math.abs(c.asixX-s.asixX)===Math.abs(c.asixY-s.asixY)){if(n(c,s))d.leftTopToRightBottom.push(r);else if(o(c,s))d.leftBottomToRightTop.push(r);else if(c.asixX===s.asixX&&c.asixY===s.asixY)for(i in d)d[i].push(r)}else c.asixX===s.asixX&&c.asixY!==s.asixY?d.vertical.push(r):c.asixX!==s.asixX&&c.asixY===s.asixY&&d.horizontal.push(r);return d},t.getSortChesses=function(e,t){var s;switch(e){case\"horizontal\":s=t.sort(function(e,t){var s,i;return s=a(e),i=a(t),s.asixX>i.asixX?1:s.asixX<i.asixX?-1:0});break;case\"leftTopToRightBottom\":case\"leftBottomToRightTop\":case\"vertical\":s=t.sort(function(e,t){var s,i;return s=a(e),i=a(t),s.asixY>i.asixY?1:s.asixY<i.asixY?-1:0})}return s},t.getConnectChesses=function(e,t,s){var r,n,o,c,l=[];for(c=0;c<s.length;c++)if(r=s[c],0===l.length?l.push(r):(n=a(l[l.length-1]),o=a(r),t!==i(n,o)&&(l.length=0),l.push(r)),l.length>=e)return l;return l}},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.overlayStyles=t.createChess=t.getGrid=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(0));t.getGrid=function(e,t){var s,i,r;for((s=document.createElement(\"canvas\")).classList.add(\"chessboard__grid\"),s.width=e,s.height=t,(i=s.getContext(\"2d\")).save(),i.lineWidth=1,i.strokeStyle=\"black\",r=.5;r<i.canvas.height;r+=a.CHESS_SIZE)i.beginPath(),i.moveTo(0,r),i.lineTo(i.canvas.width,r),i.stroke();for(r=.5;r<i.canvas.width;r+=a.CHESS_SIZE)i.beginPath(),i.moveTo(r,0),i.lineTo(r,i.canvas.height),i.stroke();return i.restore(),s},t.createChess=function(e){var t,s;return(t=document.createElement(\"canvas\")).width=a.CHESS_SIZE/2,t.height=a.CHESS_SIZE/2,t.classList.add(\"chessman\"),(s=t.getContext(\"2d\")).beginPath(),s.arc(15,15,15,0,2*Math.PI),s.fillStyle=e.key,s.fill(),t},t.overlayStyles=[\"chessman__overlay\"]},function(e,t,s){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.overlayStyles=[\"chessman__overlay\",\"chessman__overlay--div\"],t.getGrid=function(e,t){var s;return(s=document.createElement(\"div\")).style.width=e+\"px\",s.style.height=t+\"px\",s.classList.add(\"chessboard__grid\"),s.classList.add(\"chessboard__grid--div\"),s},t.createChess=function(e){var t;return(t=document.createElement(\"div\")).classList.add(\"chessman\"),t.classList.add(\"chessman__div\"),t.classList.add(\"chessman__div--\"+e.key),t}},function(e,t,s){\"use strict\";var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t.default=e,t}(s(1));s(2),s(4),s(5),s(3),window.start=function(e){a.start(e)}}],[9]);\n\n\n// WEBPACK FOOTER //\n// bundle.1382ef915ba5430a7864.js","\r\nconst CHESS_SIZE = 60,\r\n    VICTORY_CONDITION = 5,\r\n    SLASH_DISTANCE = 1.414,\r\n    STRAIGHT_DISTANCE = 1;\r\n\r\nexport {\r\n    CHESS_SIZE,\r\n    VICTORY_CONDITION,\r\n    SLASH_DISTANCE,\r\n    STRAIGHT_DISTANCE\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/chess-defined.js","import * as chessDefined from './chess-defined';\r\nimport * as chessQuery from './chess-query';\r\nimport * as byCanvas from './draw-by-canvas';\r\nimport * as byDiv from './draw-by-div';\r\n\r\nlet player, attackSide, lastChess, checkmateChessList,\r\n    getChessboardGrid, createChess,\r\n    chessOverlayStyles = [],\r\n    gameoverElement = document.querySelector('.gameover'),\r\n    gobang = {};\r\n\r\n/**\r\n * 判斷瀏覽器支援不支援canvas, 不支援就改用div提供繪圖\r\n * https://stackoverflow.com/questions/2745432/best-way-to-detect-that-html5-canvas-is-not-supported?answertab=active#tab-top\r\n * \r\n * @returns {boolean} \r\n */\r\nconst setCommonFunction = () => {\r\n    var canvas, isCanvasSupport;\r\n    canvas = document.createElement('canvas');\r\n    isCanvasSupport = !!(canvas.getContext && canvas.getContext('2d'));\r\n\r\n    if (isCanvasSupport) {\r\n        getChessboardGrid = byCanvas.getGrid;\r\n        createChess = byCanvas.createChess;\r\n        chessOverlayStyles = byCanvas.overlayStyles;\r\n    } else {\r\n        getChessboardGrid = byDiv.getGrid;\r\n        createChess = byDiv.createChess;\r\n        chessOverlayStyles = byDiv.overlayStyles;\r\n    }\r\n}    \r\n\r\n/**\r\n * 開始遊戲\r\n * \r\n * @param {any} event \r\n */\r\nconst start = (event) => {\r\n    event.target.innerText = 'Restart';\r\n    setCommonFunction();\r\n    init();\r\n    cleanChessBoard();\r\n    createChessBoard();\r\n}\r\n\r\n/**\r\n * 遊戲初始化數值\r\n * \r\n */\r\nconst init = () => {\r\n    gameoverElement.classList.add('gameover--hide');\r\n    gobang.player = { \r\n        whiteSide: { key: 'white', chesses: [] }, \r\n        blackSide: { key: 'black', chesses: [] }\r\n    };\r\n    gobang.attackSide = 'whiteSide';\r\n    gobang.checkmateChessList = [];\r\n}\r\n\r\n/**\r\n * 清理棋盤，把棋子、旗子特效、禁止選擇棋格都清除\r\n * \r\n */\r\nconst cleanChessBoard = () => {\r\n    var chessboard;\r\n    \r\n    chessboard = document.querySelector('.chessboard');\r\n\r\n    chessboard.setAttribute('style', 'width:' + chessboard.clientWidth + 'px');\r\n    chessboard.style.width= chessboard.clientWidth + 'px';\r\n\r\n    while(chessboard.childNodes.length > 0){\r\n        chessboard.childNodes[0].parentNode.removeChild(chessboard.childNodes[0]);\r\n    }\r\n}\r\n\r\n/**\r\n * 畫出棋盤\r\n * \r\n */\r\nconst createChessBoard = () => {\r\n    var chessRow, chessColumn, chessBoardGrid, gridWidth, gridHeight, \r\n        chessboard, chessboardRows, chessboardColumns, i, j;\r\n\r\n    chessboard = document.querySelector('.chessboard');\r\n    // 棋格列數\r\n    chessboardRows = Math.floor(chessboard.clientHeight / chessDefined.CHESS_SIZE);\r\n    // 棋格欄數\r\n    chessboardColumns = Math.floor(chessboard.clientWidth / chessDefined.CHESS_SIZE);\r\n    gridWidth = chessboardColumns * chessDefined.CHESS_SIZE - (chessDefined.CHESS_SIZE - 1);\r\n    gridHeight = chessboardRows * chessDefined.CHESS_SIZE - (chessDefined.CHESS_SIZE - 1);\r\n\r\n    // 準備畫圖時把棋盤寬度定死，避免調整瀏覽器大小的時候影響棋格\r\n    chessboard.setAttribute('style', 'width:' + chessboard.clientWidth + 'px');\r\n    chessboard.style.width= chessboard.clientWidth + 'px';\r\n\r\n    // 畫出棋盤\r\n    chessBoardGrid = getChessboardGrid(gridWidth, gridHeight);\r\n    chessboard.appendChild(chessBoardGrid);\r\n\r\n    // 畫出透明棋格讓棋子看起來像是在線的交叉點上\r\n    for (i = 0; i < chessboardRows; i++) {\r\n        // 棋盤列\r\n        chessRow = document.createElement('div');\r\n        chessRow.classList.add('chessboard__row');\r\n        for (j = 0; j < chessboardColumns; j++) {\r\n            // 棋盤欄\r\n            chessColumn = document.createElement('div');\r\n            chessColumn.classList.add('chessboard__column');\r\n            chessColumn.classList.add('pointer');\r\n            chessColumn.setAttribute('data-asix-x', j);\r\n            chessColumn.setAttribute('data-asix-y', i);\r\n            // chessColumn.dataset.asixX = j;\r\n            // chessColumn.dataset.asixY = i;\r\n            // 下棋事件\r\n            chessColumn.onclick = function(event) { chess(event) };\r\n            chessRow.appendChild(chessColumn);\r\n        }\r\n        chessboard.appendChild(chessRow);\r\n    }\r\n}\r\n\r\n/**\r\n * 建立下最後一手的棋格背景\r\n * \r\n */\r\nconst getOverlay = (type) => {\r\n    var overlay;\r\n    \r\n    overlay = document.createElement('div');\r\n    chessOverlayStyles.forEach(function(chessOverlayStyle) {\r\n        overlay.classList.add(chessOverlayStyle);\r\n    });\r\n    overlay.classList.add('chessman__overlay--' + type);\r\n\r\n    return overlay;\r\n};\r\n\r\n/**\r\n * 取得目前是哪個角色在下棋\r\n * \r\n * @returns 現在下棋的角色\r\n */\r\nconst getPlayer = () => {\r\n    return gobang.player[gobang.attackSide];\r\n}\r\n\r\n/**\r\n * 切換下棋角色\r\n * \r\n */\r\nconst changeAttackPlayer = (side) => {\r\n    if (side === 'whiteSide') {\r\n        return 'blackSide';\r\n    } else {\r\n        return 'whiteSide';\r\n    }\r\n}    \r\n\r\n/**\r\n * 把新棋子放到棋盤上\r\n * \r\n * @param {any} event 下棋事件\r\n */\r\nconst chess = (event) => {\r\n    var target, player, overlay, chess;\r\n\r\n    target = event.target;\r\n    player = getPlayer();\r\n    overlay = getOverlay('last');\r\n\r\n    // 判斷點到的是不是十字棋格，不是的話就找到最近的棋格\r\n    if (target.className.indexOf('chessboard__column') === -1) {\r\n        target = target.closest('.chessboard__column');\r\n    }\r\n\r\n    // 判斷棋格有沒有被選走\r\n    if (target.className.indexOf('selected') === -1) {\r\n        chess = createChess(player);\r\n\r\n        // 前一手棋移除最後一手的特效\r\n        removeOverlay();\r\n\r\n        // 把棋子放到十字上\r\n        target.appendChild(chess);\r\n        target.appendChild(overlay);\r\n        target.classList.add('selected');\r\n        gobang.lastChess = target;\r\n        player.chesses.push(target);\r\n\r\n        // 第一棋沒有最後一手\r\n        if (gobang.lastChess) {\r\n            // 判斷這一棋是不是將軍\r\n            if (isCheckmate()) {\r\n                // console.log('checkmate ! ');\r\n                removeOverlay();\r\n                setVictoryChesses(gobang.checkmateChessList);\r\n                setVictoryMessage(gobang.attackSide);\r\n            }\r\n        }\r\n        gobang.attackSide = changeAttackPlayer(gobang.attackSide);\r\n    }\r\n}\r\n\r\n/**\r\n * 判斷是不是將軍了\r\n * \r\n */\r\nconst isCheckmate = () => {\r\n    var attackPlayer, rangeChessList, groupChessList, group, sortChessList, expectDistance,\r\n        checkmat = false;\r\n    \r\n    attackPlayer = getPlayer();\r\n    rangeChessList = chessQuery.getRangeChesses(chessDefined.VICTORY_CONDITION, gobang.lastChess, attackPlayer);\r\n\r\n    // 範圍內棋子數量不足獲勝條件的棋子數就不需要判斷\r\n    if (rangeChessList.length >= chessDefined.VICTORY_CONDITION) {\r\n        groupChessList = chessQuery.getGroupChesses(gobang.lastChess, rangeChessList);\r\n        for (group in groupChessList) {\r\n            // 分組內棋子不足獲勝條件的棋子數就不需要判斷\r\n            if (groupChessList[group].length >= chessDefined.VICTORY_CONDITION) {\r\n                sortChessList = chessQuery.getSortChesses(group, groupChessList[group]);\r\n                expectDistance = getExpectDistance(group);\r\n                gobang.checkmateChessList = chessQuery.getConnectChesses(chessDefined.VICTORY_CONDITION, expectDistance, sortChessList);\r\n\r\n                // 連線棋子到達獲利條件的棋子數量代表獲勝了\r\n                if (gobang.checkmateChessList.length >= chessDefined.VICTORY_CONDITION) {\r\n                    checkmat = true;\r\n                    return checkmat;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    return checkmat;\r\n}\r\n\r\n/**\r\n * 刪除最後一手棋的特效\r\n * \r\n */\r\nconst removeOverlay = () => {\r\n    var overlayList;\r\n\r\n    overlayList = document.getElementsByClassName('chessman__overlay');\r\n    while(overlayList.length > 0) {\r\n        overlayList[0].parentNode.removeChild(overlayList[0]);\r\n    }\r\n}\r\n\r\n/**\r\n * 取得預期兩顆棋子的直線距離\r\n * \r\n * @param {any} group \r\n */\r\nconst getExpectDistance = (group) => {\r\n    var expectDistance;\r\n\r\n    switch(group) {\r\n        case 'leftTopToRightBottom':\r\n        case 'leftBottomToRightTop':\r\n            expectDistance = chessDefined.SLASH_DISTANCE;\r\n            break;\r\n        case 'vertical':\r\n        case 'horizontal':\r\n            expectDistance = chessDefined.STRAIGHT_DISTANCE;\r\n            break;\r\n    }\r\n    \r\n    return expectDistance;\r\n}\r\n\r\n/**\r\n * 高亮連線的棋子\r\n * \r\n * @param {any} chessList \r\n */\r\nconst setVictoryChesses = (chessList) => {\r\n    var checkmateChess, childNodes, victoryOverlay, i, j;\r\n\r\n    for (i = 0; i < chessList.length; i++) {\r\n        checkmateChess = chessList[i];\r\n        checkmateChess.classList.add('chessboard__column--victory');\r\n\r\n        childNodes = checkmateChess.childNodes;\r\n        for (j = 0; j < childNodes.length; j++) {\r\n            if (childNodes[j].className.indexOf('chessman') !== -1) {\r\n                childNodes[j].classList.add('chessman--victory');\r\n            }\r\n        }\r\n        victoryOverlay = getOverlay('victory');\r\n        checkmateChess.appendChild(victoryOverlay);\r\n    }\r\n}\r\n\r\n/**\r\n * 顯示勝利者是誰的訊息\r\n * \r\n * @param {any} side \r\n */\r\nconst setVictoryMessage = (side) => {\r\n    var message;\r\n    \r\n    message = document.querySelector('.gameover__message');\r\n    message.innerText = 'Winner is ' + side + ' !';\r\n    gameoverElement.classList.remove('gameover--hide');\r\n}\r\n\r\nexport {\r\n    // output function \r\n    start,\r\n    // common function for canvas support \r\n    getChessboardGrid,\r\n    createChess,\r\n    chessOverlayStyles,\r\n    setCommonFunction,\r\n    // global variables\r\n    player,\r\n    attackSide,\r\n    lastChess,\r\n    gameoverElement,\r\n    checkmateChessList\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/main.js","module.exports = __webpack_public_path__ + \"img/Octocat.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/Octocat.png\n// module id = 3\n// module chunks = 0","module.exports = __webpack_public_path__ + \"img/favicon.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/favicon.png\n// module id = 4\n// module chunks = 0","module.exports = __webpack_public_path__ + \"img/gobang.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/img/gobang.png\n// module id = 5\n// module chunks = 0","/**\r\n * 把XY軸差距小於指定勝利條件(5)的棋子拿進來，只有這些有機會將軍\r\n * \r\n * @param {any} VICTORY_CONDITION 獲勝條件\r\n * @param {any} lastChess 最後一手棋\r\n * @param {any} attackPlayer 攻擊方\r\n * @returns \r\n */\r\nconst getRangeChesses = (VICTORY_CONDITION, lastChess, attackPlayer) => {\r\n    var targetPosition, chessList, rangeChessList, item;\r\n\r\n    targetPosition = getPosition(lastChess);\r\n    chessList = attackPlayer.chesses;\r\n\r\n    rangeChessList = chessList.filter(function(chess) {\r\n        item = getPosition(chess);\r\n        if (isWithinScope(item, targetPosition, VICTORY_CONDITION)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    });\r\n\r\n    return rangeChessList;\r\n}\r\n\r\n/**\r\n * 把棋子分組 (左上+右下), (左下+右上), (正上+正下), (正左+正右)\r\n * \r\n * @param {any} lastChess 用來當基準的最後一手棋\r\n * @param {any} chessList 未被分組的棋子\r\n * @returns \r\n */\r\nconst getGroupChesses = (lastChess, chessList) => {\r\n    var targetPosition, group, chess, item, distanceX, distanceY, i,\r\n        groupChessList = {\r\n            'leftTopToRightBottom': [],\r\n            'leftBottomToRightTop': [],\r\n            'vertical': [],\r\n            'horizontal': []\r\n        };\r\n\r\n    targetPosition = getPosition(lastChess);\r\n\r\n    for (i = 0; i < chessList.length; i++) {\r\n        chess = chessList[i];\r\n        item = getPosition(chess);\r\n        distanceX = Math.abs(item.asixX - targetPosition.asixX);\r\n        distanceY = Math.abs(item.asixY - targetPosition.asixY);\r\n        // 和最後一手的位置相減一樣才會在同一條斜線上 EX: [(0,0), (1,1), (2,2)]\r\n        if (distanceX === distanceY) {\r\n            // 左上和右下\r\n            if (isFromLeftTopToRightBottomChess(item, targetPosition)) {\r\n                groupChessList['leftTopToRightBottom'].push(chess);\r\n            }\r\n            // 左下和右上\r\n            else if (isFromLeftBottomToRightTopChess(item, targetPosition)) {\r\n                groupChessList['leftBottomToRightTop'].push(chess);\r\n            }\r\n            // 將死一定要最後一手棋，所以放到每一組裡\r\n            else if (item.asixX === targetPosition.asixX && item.asixY === targetPosition.asixY) {\r\n                for (group in groupChessList) {\r\n                    groupChessList[group].push(chess);\r\n                }\r\n            }\r\n        } \r\n        // 垂直 X軸一樣\r\n        else if (item.asixX === targetPosition.asixX && item.asixY !== targetPosition.asixY) {\r\n            groupChessList['vertical'].push(chess);\r\n\r\n        } \r\n        // 水平 Y軸一樣\r\n        else if (item.asixX !== targetPosition.asixX && item.asixY === targetPosition.asixY) {\r\n            groupChessList['horizontal'].push(chess);\r\n\r\n        }\r\n    };\r\n\r\n    return groupChessList;\r\n}\r\n\r\n/**\r\n * 由小到大重新排列棋子\r\n * \r\n * @param {string} group 分組名稱\r\n * @param {any} chessList \r\n * @returns \r\n */\r\nconst getSortChesses = (group, chessList) => {\r\n    var sortChessList;\r\n\r\n    switch(group) {\r\n        // 只有水平方向差別在Y軸都一樣所以用X軸排序\r\n        case 'horizontal':        \r\n            sortChessList = chessList.sort(function(a, b) {\r\n                var chessA, chessB;\r\n                chessA = getPosition(a);\r\n                chessB = getPosition(b);\r\n                if (chessA.asixX > chessB.asixX) {\r\n                    return 1;\r\n                } else if (chessA.asixX < chessB.asixX) {\r\n                    return -1;\r\n                } \r\n                return 0;\r\n            });\r\n            break;\r\n        case 'leftTopToRightBottom':            \r\n        case 'leftBottomToRightTop':\r\n        case 'vertical':\r\n            sortChessList = chessList.sort(function(a, b) {\r\n                var chessA, chessB;\r\n                chessA = getPosition(a);\r\n                chessB = getPosition(b);                    \r\n                if (chessA.asixY > chessB.asixY) {\r\n                    return 1;\r\n                } else if (chessA.asixY < chessB.asixY) {\r\n                    return -1;\r\n                } \r\n                return 0;\r\n            });\r\n            break;\r\n    }\r\n\r\n    return sortChessList;\r\n}\r\n\r\n/**\r\n * 判斷這個棋子組有沒有將軍了\r\n * \r\n * @param {any} VICTORY_CONDITION 獲勝條件\r\n * @param {any} expectDistance 預期兩手棋間的距離\r\n * @param {any} chessList \r\n */\r\nconst getConnectChesses = (VICTORY_CONDITION, expectDistance, chessList) => {\r\n    var itemChess, prevPosition, nextPosition, actualDistance, i,\r\n        connectChessList = [];\r\n\r\n    for (i = 0; i < chessList.length; i++) {\r\n        itemChess = chessList[i];\r\n        if (connectChessList.length === 0) {\r\n            connectChessList.push(itemChess);\r\n        } else {\r\n            prevPosition = getPosition(connectChessList[connectChessList.length-1]);\r\n            nextPosition = getPosition(itemChess);\r\n            // 前一個位置和目前位置的距離\r\n            actualDistance = getDistance(prevPosition, nextPosition);\r\n            // 和預期不一樣代表兩個棋子不是連在一起的\r\n            if (expectDistance !== actualDistance) {\r\n            connectChessList.length = 0;\r\n            }\r\n            connectChessList.push(itemChess);\r\n        }\r\n\r\n        if (connectChessList.length >= VICTORY_CONDITION) {\r\n            return connectChessList;\r\n        }\r\n    }\r\n    \r\n    return connectChessList;\r\n}\r\n\r\n/**\r\n * 取得棋子的位置\r\n * \r\n * @returns \r\n */\r\nconst getPosition = (target) => {\r\n    var targetPosition;\r\n\r\n    targetPosition = { \r\n        // asixX: +target.dataset.asixX, \r\n        // asixY: +target.dataset.asixY \r\n        asixX: +target.getAttribute('data-asix-x'),\r\n        asixY: +target.getAttribute('data-asix-y')\r\n    };\r\n\r\n    return targetPosition;\r\n}\r\n\r\n/**\r\n * 計算兩個棋子的距離\r\n * \r\n * @param {any} a \r\n * @param {any} b \r\n * @returns \r\n */\r\nconst getDistance = (a, b) => {\r\n    var distanceX, distanceY;\r\n\r\n    distanceX = a.asixX - b.asixX;\r\n    distanceY = a.asixY - b.asixY;\r\n\r\n    return +Math.pow((distanceX * distanceX + distanceY * distanceY), 0.5).toFixed(3);\r\n}\r\n\r\n/**\r\n * 判斷棋子是否在指定的範圍內\r\n * \r\n * @param {any} other 其他棋子位置\r\n * @param {any} target 最後一手棋位置\r\n * @param {any} VICTORY_CONDITION 獲勝條件 \r\n */\r\nconst isWithinScope = (other, target, VICTORY_CONDITION) => {\r\n    if (Math.abs(other.asixX - target.asixX) < VICTORY_CONDITION && \r\n        Math.abs(other.asixY - target.asixY) < VICTORY_CONDITION) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * 判斷這顆棋子是不是在最後一手棋的左上或右下\r\n * \r\n * @param {any} other 其他棋子位置\r\n * @param {any} target 最後一手棋位置\r\n * @returns \r\n */\r\nconst isFromLeftTopToRightBottomChess = (other, target) => {\r\n    if (other.asixX < target.asixX && other.asixY < target.asixY ||\r\n        other.asixX > target.asixX && other.asixY > target.asixY) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**\r\n * 判斷這顆棋子是不是在最後一手棋的左下或右上\r\n * \r\n * @param {any} other 其他棋子位置\r\n * @param {any} target 最後一手棋位置\r\n * @returns \r\n */\r\nconst isFromLeftBottomToRightTopChess = (other, target) => {\r\n    if (other.asixX < target.asixX && other.asixY > target.asixY ||\r\n        other.asixX > target.asixX && other.asixY < target.asixY) {\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nexport {\r\n    getRangeChesses,\r\n    getGroupChesses,\r\n    getSortChesses,\r\n    getConnectChesses\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/chess-query.js","import * as chessDefined from './chess-defined';\r\n\r\nconst overlayStyles = ['chessman__overlay'];    \r\n\r\n/**\r\n * 用canvas畫出棋格\r\n * \r\n * @param {any} chessboard \r\n */\r\nconst getGrid = (gridWidth, gridHeight) => {\r\n    var canvas, context, i,\r\n        stepX = 0, \r\n        stepY = 0, \r\n        lineWidth = 1, \r\n        color = 'black';\r\n\r\n    canvas = document.createElement(\"canvas\");\r\n    canvas.classList.add('chessboard__grid');\r\n    canvas.width = gridWidth;\r\n    canvas.height = gridHeight;\r\n    context = canvas.getContext(\"2d\");\r\n\r\n    context.save();  \r\n    context.lineWidth = lineWidth;  \r\n    context.strokeStyle = color; \r\n\r\n    for (i = stepY + 0.5 ; i < context.canvas.height; i += chessDefined.CHESS_SIZE) {  \r\n        context.beginPath();  \r\n        context.moveTo(0, i);  \r\n        context.lineTo(context.canvas.width, i);  \r\n        context.stroke();\r\n    }\r\n\r\n    for (i = stepX + 0.5; i < context.canvas.width; i += chessDefined.CHESS_SIZE) {  \r\n        context.beginPath();  \r\n        context.moveTo(i, 0);  \r\n        context.lineTo(i, context.canvas.height);  \r\n        context.stroke();\r\n    }  \r\n\r\n    context.restore();\r\n\r\n    return canvas;\r\n}\r\n\r\n/**\r\n * 用canvas新增棋子\r\n * \r\n * @param {any} player 目前下棋的角色\r\n * @returns {Element}\r\n */\r\nconst createChess = (player) => {\r\n    var chessBox, chess;\r\n\r\n    chessBox = document.createElement('canvas');\r\n    chessBox.width = (chessDefined.CHESS_SIZE / 2);\r\n    chessBox.height = (chessDefined.CHESS_SIZE / 2);\r\n    chessBox.classList.add('chessman');\r\n    chess = chessBox.getContext(\"2d\");\r\n\r\n    chess.beginPath();\r\n    chess.arc(15, 15, 15, 0, 2 * Math.PI);\r\n    chess.fillStyle = player.key;\r\n    chess.fill();\r\n\r\n    return chessBox;\r\n}\r\n\r\nexport {\r\n    getGrid,\r\n    createChess,\r\n    overlayStyles\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/draw-by-canvas.js","\r\nconst overlayStyles = [\r\n    'chessman__overlay', \r\n    'chessman__overlay--div'\r\n];\r\n\r\n/**\r\n * 用div畫出棋格 (.chessboard__grid--div)\r\n * \r\n * @param {any} div \r\n * @returns \r\n */\r\nconst getGrid = (gridWidth, gridHeight) => {\r\n    var div;\r\n\r\n    div = document.createElement('div');\r\n    div.style.width = gridWidth + 'px';\r\n    div.style.height = gridHeight + 'px';\r\n    div.classList.add('chessboard__grid');\r\n    div.classList.add('chessboard__grid--div');\r\n\r\n    return div;\r\n}\r\n\r\n/**\r\n * 用div新增棋子\r\n * \r\n * @param {any} player 目前下棋的角色\r\n * @returns {Element}\r\n */\r\nconst createChess = (player) => {\r\n    var chess;\r\n\r\n    chess = document.createElement('div');\r\n    chess.classList.add('chessman');\r\n    chess.classList.add('chessman__div');\r\n    chess.classList.add('chessman__div--' + player.key);\r\n\r\n    return chess;\r\n}\r\n\r\nexport { \r\n    overlayStyles,\r\n    getGrid,\r\n    createChess \r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/js/draw-by-div.js","import * as app from './main';\r\nimport '../sass/main.scss';\r\n\r\nimport '../img/favicon.png';\r\nimport '../img/gobang.png';\r\nimport '../img/Octocat.png';\r\n\r\nwindow.start = (event) => {\r\n    app.start(event);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/js/index.js"],"sourceRoot":""}